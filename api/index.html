<!DOCTYPE html>
<html>
<head>
  <title>Hello world</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
  <div id="loginContainer">
    <input id="login" value="userA">
    <button onclick="user_login();">Login</button>
  </div>
</body>
<script src="/socket.io/socket.io.js"></script>
<script>
var socket = io();
let username;
function user_login(){
  var login = document.getElementById('login').value;
  username = login;
  socket.send({
    type: "login",
    name: username
  })
}
socket.on('connect', function(data) {
  console.log('connect');
});
//when a user logs in
function onLogin(data) {

  if (data.success === false) {
    alert("Username taken");
  } else {
    username = data.username;    
    console.log("logged in as :"+username);
    console.log(data.userlist);
  }
}
socket.on('roommessage', function(message){
  var data = message;

  switch(data.type) {
    case "login":
    console.log("New user : "+data.username);
    break;
    case "disconnect":
    console.log("User disconnected : "+data.username);
    break;
    default:
    break;
  }
});
socket.on('message', function(message){
  var data = message;

  switch(data.type) {
    case "login":
    onLogin(data);
    break;
    default:
    break;
  }
});
</script>
</html>
